{"children":[{"children":[],"uri":"https://www.notion.so/75b0dc07039342648a73aaf3de698547","type":"heading","createdTime":1600232700000,"lastEditedTime":1600241100000,"title":[["배경"]],"depth":2},{"children":[],"uri":"https://www.notion.so/23760cae626e47eab6fba82f2ee5d726","type":"text","createdTime":1600232700000,"lastEditedTime":1605387480000,"title":[["Airbridge에서 제공하는 Raw Data Export 기능을 개발하다보면 중간중간 포맷이 바뀔때가 있다. 인프라가 Athena에서 Snowflake로 바뀐다거나, API 리팩토링을 한다거나, 쿼리를 수정한다거나 할때 포맷이 바뀐다. 이때 우리가 의도한 변경만 있었는지 데이터를 검증해야하는데, 파일 용량이 최소 몇백 MB 단위이다 보니까 썩 쉬운 과정은 아니다. 이 글을 통해 어떻게 효율적으로 두 파일이 다른점을 검증하는지 풀어보고자 한다."]]},{"children":[],"uri":"https://www.notion.so/a1ba27ebef224b5b85ae389441c89c4a","type":"heading","createdTime":1600232760000,"lastEditedTime":1600241100000,"title":[["목표"]],"depth":2},{"children":[],"uri":"https://www.notion.so/f422bb4b8ce448b09948894bc4df50fa","type":"text","createdTime":1600240980000,"lastEditedTime":1602052080000,"title":[["Row 개수가, 같은 컬럼 기준으로 Sort 된 2개의 파일(a.csv, b.csv)이 존재한다. 이 2개의 파일이 다른 부분을 찾고 싶다."]]},{"children":[],"uri":"https://www.notion.so/0639d409d4c4423fa1810162653de86b","type":"heading","createdTime":1600232760000,"lastEditedTime":1600241100000,"title":[["방법"]],"depth":2},{"children":[{"children":[],"uri":"https://www.notion.so/eec0774c27074f9fb45227bf749b7eb3","type":"code","createdTime":1600235520000,"lastEditedTime":1600235520000,"title":[["cat a.csv | wc -l"]],"language":"Shell","wrap":true}],"uri":"https://www.notion.so/28768cf77dc54516a9300aa0b2d98499","type":"numbered_list","createdTime":1600232880000,"lastEditedTime":1600241100000,"title":[["같은 Length를 가진 파일인지 확인하기"]]},{"children":[{"children":[{"children":[],"uri":"https://www.notion.so/a416afc3fdaa4d53a9e87b4a34d96fc3","type":"code","createdTime":1600241040000,"lastEditedTime":1600241040000,"title":[["dos2unix -n ee.csv eee.csv"]],"language":"Shell","wrap":true}],"uri":"https://www.notion.so/65712f626f6141d9932925a805db8a4d","type":"numbered_list","createdTime":1600240560000,"lastEditedTime":1600241100000,"title":[["Carriage Return 없애기 (Window 환경에서 생기는 CR 캐릭터가 하나의 파일에 존재하는 경우)"]]},{"children":[{"children":[],"uri":"https://www.notion.so/cbfb177d94584d3da43774eca1235981","type":"code","createdTime":1600235700000,"lastEditedTime":1602050280000,"title":[["mlr --csv --quote-all -N unsparsify input > output"]],"language":"Shell","wrap":true}],"uri":"https://www.notion.so/687e998c0bcd4115a476b4e4aa6b87de","type":"numbered_list","createdTime":1600235460000,"lastEditedTime":1600235700000,"title":[["모든 컬럼 quote 추가해주기"]]}],"uri":"https://www.notion.so/7eb013f2a0be43f5b388ed2472ad4a32","type":"numbered_list","createdTime":1600235460000,"lastEditedTime":1600241100000,"title":[["똑같이 만들기"]]},{"children":[{"children":[],"uri":"https://www.notion.so/c78d3247bdf34826aa9584dcc4af628b","type":"code","createdTime":1600233480000,"lastEditedTime":1600233480000,"title":[["head -1 myfile.csv | sed 's/[^,]//g' | wc -c"]],"language":"Shell","wrap":true}],"uri":"https://www.notion.so/5f6bcdb3cf8c48a8b4066eb5111d0b9f","type":"numbered_list","createdTime":1600233480000,"lastEditedTime":1600241100000,"title":[["컬럼 개수 확인하기",[["a","https://linuxconfig.org/how-to-count-number-of-columns-in-csv-file-using-bash-shell"]]]]},{"children":[{"children":[],"uri":"https://www.notion.so/7367f70bbc6e488e945fdbc2ad664823","type":"code","createdTime":1600234680000,"lastEditedTime":1600235580000,"title":[["comm -3 a.csv b.csv\n\ndiff --speed-large-files 1.csv 2.csv"]],"language":"Shell","wrap":true}],"uri":"https://www.notion.so/c3579eac710545df9a1eeb05fc9b309d","type":"numbered_list","createdTime":1600234680000,"lastEditedTime":1602050340000,"title":[["비교하기 (아무것도 안나와야 함) ⇒  comm vs. diff 퍼포먼스 비교"]]},{"children":[{"children":[],"uri":"https://www.notion.so/2b69fbf30d7e40428505a41cef2dfeb6","type":"code","createdTime":1600234560000,"lastEditedTime":1602050580000,"title":[["mlr --csv --implicit-csv-header --headerless-csv-output cut -x -f 28,39 c.csv > cc.csv"]],"language":"Shell","wrap":true},{"children":[],"uri":"https://www.notion.so/fefb691db7364f959d12aad00d1c29f3","type":"text","createdTime":1602050220000,"lastEditedTime":1602052080000,"title":[["(vimdiff 말고 vimdiff에서 highlighting 한 애들만 뽑아보기 이런 기능없나.)"]]}],"uri":"https://www.notion.so/e01df97225ec4b6598ba0fad71141c74","type":"numbered_list","createdTime":1600233180000,"lastEditedTime":1602052080000,"title":[["이미 비교한 컬럼 제거하기",[["a","https://unix.stackexchange.com/questions/317366/remove-columns-from-a-csv-file"]]]]},{"children":[],"uri":"https://www.notion.so/01314c279ead4fd1982ba799ac261480","type":"numbered_list","createdTime":1600233120000,"lastEditedTime":1603856220000,"title":[["(여전히 너무 크면) 라인 Sampling해서 비교하기"]]},{"children":[],"uri":"https://www.notion.so/4c540898414d4f7f9056421a241b7ca0","type":"heading","createdTime":1601980020000,"lastEditedTime":1603856220000,"title":[["고급"]],"depth":1},{"children":[],"uri":"https://www.notion.so/d65cdb4591e64021962630624956dbb2","type":"heading","createdTime":1603856220000,"lastEditedTime":1603856280000,"title":[["파일 합치기"]],"depth":3},{"children":[],"uri":"https://www.notion.so/6f127f52b5b94708b2557039664b2e2f","type":"code","createdTime":1603856280000,"lastEditedTime":1603879560000,"title":[["cat *csv > combined.csv\n\ncat users/*.csv | sort -u > users.csv // 소팅 제대로 안됨."]],"language":"SQL","wrap":true},{"children":[],"uri":"https://www.notion.so/d20b31fdaa5241fc8930dc921749adcd","type":"heading","createdTime":1603856460000,"lastEditedTime":1603856460000,"title":[[".gz 풀기"]],"depth":3},{"children":[],"uri":"https://www.notion.so/09adf6882c53484399eaf556514f8d85","type":"code","createdTime":1603856460000,"lastEditedTime":1603856460000,"title":[["gzip -d *.gz"]],"language":"SQL","wrap":true}],"uri":"https://www.notion.so/21fd63f0017e4187a2581cc260ff921b","type":"page","createdTime":1600232640000,"lastEditedTime":1605387480000,"title":[["두 개의 다른 파일 비교하기"]],"icon":"🗃️","fullWidth":false,"coverPosition":1,"properties":{"title":[["두 개의 다른 파일 비교하기"]]}}